{"version":3,"sources":["../../src/middleware/requireLocalAuth.js"],"names":["requireLocalAuth","req","res","next","passport","authenticate","err","user","info","status","send","logIn","session"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,gBAAgB,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC3CC,oBAASC,YAAT,CAAsB,OAAtB,EAA+B,CAACC,GAAD,EAAMC,IAAN,EAAYC,IAAZ,KAAqB;AAClD,QAAIF,GAAJ,EAAS;AACP,aAAOH,IAAI,CAACG,GAAD,CAAX;AACD;;AACD,QAAI,CAACC,IAAL,EAAW;AACT,aAAOL,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,IAArB,CAAP;AACD;;AACDP,IAAAA,GAAG,CAACM,IAAJ,GAAWA,IAAX;AACAN,IAAAA,GAAG,CAACU,KAAJ,CAAUJ,IAAV,EAAgB;AAAEK,MAAAA,OAAO,EAAE;AAAX,KAAhB,EAAqCN,GAAD,IAAS;AAC3C,UAAGA,GAAH,EAAO;AACLJ,QAAAA,GAAG,CAACQ,IAAJ,CAASJ,GAAT;AACD;;AACDH,MAAAA,IAAI;AACL,KALD;AAMD,GAdD,EAcGF,GAdH,EAcQC,GAdR,EAcaC,IAdb;AAeD,CAhBD;;eAkBeH,gB","sourcesContent":["import passport from 'passport';\n\nconst requireLocalAuth = (req, res, next) => {\n  passport.authenticate('local', (err, user, info) => {\n    if (err) {\n      return next(err);\n    }\n    if (!user) {\n      return res.status(422).send(info);\n    }\n    req.user = user;\n    req.logIn(user, { session: false }, (err) => {\n      if(err){\n        res.send(err)\n      }\n      next()\n    })\n  })(req, res, next);\n};\n\nexport default requireLocalAuth;\n"],"file":"requireLocalAuth.js"}